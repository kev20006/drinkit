<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>bartindr</title>
    <!--Import Font Awesome-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import Materialise-->
    <link rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>
<style>
    #controls{
        position: -webkit-sticky; /* Safari */
        position: sticky;
        top: 0;
    }

</style>
<body class="grey darken-2">
    <nav>
        <div class="nav-wrapper black">
            <div id="nav-mobile" class="left">
                <h5><strong><i class="fas fa-glass-martini-alt"></i> Drinkit</strong></h5>
            </div>
            <ul id="nav-mobile" class="right">
                {% if session['username'] %}
                    <li>
                        <div class="chip">
                            <img src="https://www.vrc.crim.cam.ac.uk/VRCconferences/conference/cplenaries/pelnspeakers/person-placeholder.jpg/image" 
                            alt="Contact Person" />{{ session['username'] }}
                        </div>
                    </li>
                    <li><a class="waves-effect waves-light btn-small modal-trigger" href="{{ url_for('logout') }}">Log Out</a></li>
                {% else %}
                    <li><a class="waves-effect waves-light btn-small modal-trigger" href="#login">Login</a></li>
                    <li><a class="waves-effect waves-light btn-small modal-trigger" href="#sign-up">Sign-Up</a></li>
                {% endif %} 
               
            </ul>
        </div>
    </nav>
    {% block content %}
    {% endblock %}
      <!-- Login Modal -->
    <div id="login" class="modal">
        <div class="modal-content">
            <h4>login</h4>
             <div class="row">
                <form class="col s10" action="{{ url_for('login') }}" method="POST">
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="username" name="username" type="text" class="validate">
                            <label for="username">Please Enter Your Username</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="password" name="password" type="password" class="validate" data-length="5">
                            <label for="password">Please Enter Your Password</label>
                        </div>
                    </div>
                    <button class="btn waves-effect waves-light" type="submit">Join Today</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Sign Up Modal -->
    <div id="sign-up" class="modal">
        <div class="modal-content">
            <h4>Create Account</h4>
            <p>By joining drinkit you are joining a brand new community of cocktail enthusiasts. As a member you will be able to share
            your creations, offer your advice to other like minded people and follow your favorite spirits, mixers or flavors to get
            new ideas to try in your bar or at home with your friends.</p>

            <p>To join all you need to do is provide a username and a 5 digit pin number that will serve as your password.</p>
            <div class="row">
                <form class="col s12" action="{{ url_for('new_user') }}" method="POST" onsubmit="validatePasswords()">
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="new-username" name="newusername" type="text" class="validate">
                            <label for="new-username">Please Enter Your Desired Username</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="new-password1" name="newpassword1" type="password" class="validate" data-length="5">
                            <label for="new-password1">Please Enter Your Password</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12">
                            <input id="new-password2" name="newpassword2" type="password" class="validate" data-length="5">
                            <label for="new-password2">Please Re-Enter Your Password</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12">
                            <p id="password-error"></p>
                        </div>
                    </div>
                     <div class="row">
                        <div class="col s12">
                           <button class="btn waves-effect waves-light" type="submit">Join Today</button>  
                        </div>
                    </div>
                </form>
            </div>
            <p><strong>Disclaimer:</strong> Drinkit is a practice project and has implemented minimal security so please don't disclose any personal
            information, I would also advise against using your email address as your username</p>
            
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <script>
        M.AutoInit();

        validatePasswords = ()=>{
            let password1 = document.getElementById("new-password1").value;
            let password2 = document.getElementById("new-password2").value;
            if (password1 != password2){
                event.preventDefault();
                document.getElementById("new-password1").value = "";
                document.getElementById("new-password2").value = "";
                document.getElementById("password-error").innerHTML= `<strong class="red-text darken-2">Passwords did not match</strong>`;
            }else{
                return true;
            }
        }
    </script>
</body>
</html>